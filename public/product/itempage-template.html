<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="itempage.css">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="top-bar">
        <img src="../Pictures/logo.jpg" alt="Icon" class="icon">
    </div>
    <div class="container">
        <nav>
            <a href="#" id="category-link"></a> > 
            <a href="#" id="sub-category-link" class="sub-category-link"></a>
        </nav>
        <h1 id="product-name"></h1>
        <div class="content">
            <div class="image-container">
                <div class="image-background">
                    <img id="product-image" alt="Product Image">
                </div>
            </div>
            <div class="details">
                <div class="price">
                    <span class="current-price" id="product-price"></span>
                </div>
                <button id="add-to-cart-button">Add to cart</button>
                <div class="about">
                    <h2>ABOUT ITEM</h2>
                    <p><strong>Brand, manufacturer:</strong> <span id="product-manufacturer"></span></p>
                    <p><strong>Weight:</strong> <span id="product-weight"></span></p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3 cart-section">
        <h4>Shopping Cart</h4>
        <div class="cart-content">
            <div id="cart-items"></div>
            <p class="reg-text">Total Sum: <span id="total-sum">0</span></p>
            <div class="d-grid gap-2">
                <button class="btn btn-primary btn-block purchase-button" onclick="payNow()">Pay Now <i class="bi bi-cart"></i></button>
                <button class="btn btn-danger btn-block clear-button" id="Clear-Cart" onclick="clearCart()">Clear Cart <i class="bi bi-trash"></i></button>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const productData = JSON.parse(localStorage.getItem('productData'));

            if (productData) {
                document.getElementById('category-link').textContent = productData.category;
                document.getElementById('sub-category-link').textContent = productData.subCategory;
                document.getElementById('product-name').textContent = productData.name;
                document.getElementById('product-image').src = productData.image;
                document.getElementById('product-price').textContent = `â‚ª${productData.price}`;
                document.getElementById('product-manufacturer').textContent = productData.manufacturer;
                document.getElementById('product-weight').textContent = `${productData.weight} ${productData.weightUnit}`;

                document.getElementById('add-to-cart-button').addEventListener('click', function() {
                    addToCart(productData._id);
                });
            } else {
                alert('No product data found');
            }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="../src/cart.js"></script>
</body>
</html>
