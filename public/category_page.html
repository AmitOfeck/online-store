<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Eats</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <header>
    <!--Top Nav Bar-->
    <nav class="navbar navbar-expand-lg navbar-custom">
      <div class="container-fluid">
        <div class="navbar-brand">
          <button class="btn btn-filter"><a href="reglog.html" class="login_btn">Log In</a></button>
          <button class="btn btn-address" data-bs-toggle="modal" data-bs-target="#addressModal">Address <i class="bi bi-geo-alt"></i></button>
        </div>
        <div class="navbar-nav">
          <div class="nav-item">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search in Super Eats">
            </div>
          </div>
        </div>
        <div class="nav-right">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-list"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <a class="Cat">Menu</a>
              <li><a class="dropdown-item" href="#"><img src="Pictures/milk-dairy-icon.jpg" class="icon"> Dairy and Eggs</a></li>
              <li><a class="dropdown-item" href="#"><img src="Pictures/fruit-icon.jpg" class="icon"> Fruit and Vegetables</a></li>
              <li><a class="dropdown-item" href="#"><img src="Pictures/fish-meat-icon.jpg" class="icon"> Meat and Fish</a></li>
              <li><a class="dropdown-item" href="#"><img src="Pictures/sweetandsalty-icon.jpg" class="icon"> Sweet & Salty</a></li>
              <li><a class="dropdown-item" href="#"><img src="Pictures/drink-icon.jpg" class="icon"> Beverages</a></li>
              <li><a class="dropdown-item" href="#"><img src="Pictures/frozen-icon.jpg" class="icon"> Frozen Produce</a></li>
            </ul>
          </div>
          <a class="navbar-brand" href="#">
            <img src="Pictures/logo.jpg" alt="Logo">
          </a>
        </div>
      </div>
    </nav>
  </header>

  <div class="container-fluid main-content">
    <div class="row">
      <div class="col-md-9">
        <div id="product-list">
          <!-- Products will be injected here by JavaScript -->
        </div>
      </div>

      <!--Cart Section-->
      <div class="col-md-3 cart-section">
        <h4>Shopping Cart</h4>
        <div class="cart-content">
          <!-- Cart items will go here -->
          <div id="cart-items"></div>
          <p class="reg-text">Total Sum: <span id="total-sum">0</span></p>
          <button class="btn btn-primary btn-block purchase-button">Pay Now <i class="bi bi-cart"></i></button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script>
  const products = [
  {
    "category": "grocery",
    "subCategory": "fruits",
    "name": "Apple",
    "supplierId": "supplier123",
    "manufacturer": "FreshFarms",
    "price": 3,
    "currentStock": 150,
    "image": "https://www.collinsdictionary.com/images/full/apple_158989157.jpg",
    "weight": 200,
    "weightUnit": "g",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "vegetables",
    "name": "Carrot",
    "supplierId": "supplier124",
    "manufacturer": "VeggieDelight",
    "price": 2,
    "currentStock": 200,
    "image": "https://images.unsplash.com/photo-1589923188900-6806cc5cda5e",
    "weight": 100,
    "weightUnit": "g",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "dairy",
    "name": "Milk",
    "supplierId": "supplier125",
    "manufacturer": "DairyBest",
    "price": 4,
    "currentStock": 100,
    "image": "https://images.unsplash.com/photo-1576158113213-56d37382368d",
    "weight": 1,
    "weightUnit": "l",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "meat",
    "name": "Chicken Breast",
    "supplierId": "supplier126",
    "manufacturer": "MeatKing",
    "price": 12,
    "currentStock": 75,
    "image": "https://images.unsplash.com/photo-1562967914-58b8d6e74261",
    "weight": 500,
    "weightUnit": "g",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "bakery",
    "name": "Whole Wheat Bread",
    "supplierId": "supplier127",
    "manufacturer": "BreadMasters",
    "price": 5,
    "currentStock": 50,
    "image": "https://images.unsplash.com/photo-1571193045395-503a14fc4ef0",
    "weight": 750,
    "weightUnit": "g",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "beverages",
    "name": "Orange Juice",
    "supplierId": "supplier128",
    "manufacturer": "JuiceExpress",
    "price": 6,
    "currentStock": 80,
    "image": "https://images.unsplash.com/photo-1559679908-31c952ce1407",
    "weight": 1,
    "weightUnit": "l",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "snacks",
    "name": "Potato Chips",
    "supplierId": "supplier129",
    "manufacturer": "SnackTime",
    "price": 3,
    "currentStock": 120,
    "image": "https://images.unsplash.com/photo-1584036561584-b03c19da874c",
    "weight": 200,
    "weightUnit": "g",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "seafood",
    "name": "Salmon Fillet",
    "supplierId": "supplier130",
    "manufacturer": "SeaFresh",
    "price": 15,
    "currentStock": 60,
    "image": "https://images.unsplash.com/photo-1514517192744-df84dffea9a3",
    "weight": 400,
    "weightUnit": "g",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "canned goods",
    "name": "Canned Tomatoes",
    "supplierId": "supplier131",
    "manufacturer": "TomatoLovers",
    "price": 2,
    "currentStock": 200,
    "image": "https://images.unsplash.com/photo-1562967913-c7d391e141ec",
    "weight": 400,
    "weightUnit": "g",
    "__v": 0
  },
  {
    "category": "grocery",
    "subCategory": "grains",
    "name": "Basmati Rice",
    "supplierId": "supplier132",
    "manufacturer": "GrainFields",
    "price": 10,
    "currentStock": 90,
    "image": "https://images.unsplash.com/photo-1617957747492-1b1b9a5fcce0",
    "weight": 1,
    "weightUnit": "kg",
    "__v": 0
  }
];


    const cart = [];
    const productList = document.getElementById('product-list');
    const cartItems = document.getElementById('cart-items');
    const totalSum = document.getElementById('total-sum');

    function renderProducts() {
      products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';

        productCard.innerHTML = `
          <img src="${product.image}" alt="${product.name}">
          <h5>${product.name}</h5>
          <p>${product.weight} ${product.weightUnit}</p>
          <p>$${product.price}</p>
          <button class="btn btn-add-to-cart" onclick="addToCart('${product.name}')">Add to Cart</button>
        `;

        productList.appendChild(productCard);
      });
    }

    function renderCart() {
      cartItems.innerHTML = '';
      let sum = 0;

      cart.forEach(item => {
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';

        cartItem.innerHTML = `
          <div class="input-group small-input-group">
            <div class="input-group-prepend">
              <button class="btn btn-outline-secondary" type="button" onclick="decreaseQuantity('${item.name}')">-</button>
            </div>
            <input type="text" class="form-control text-center" value="${item.quantity}" readonly>
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" type="button" onclick="increaseQuantity('${item.name}')">+</button>
            </div>
          </div>
          <div class="ml-3 cart-prod-info">
            <span class="cart-prod-text">${item.name}</span>
            <span class="cart-prod-text">$${item.price}</span>
          </div>
          <div class="ml-auto">
            <img src="${item.image}" alt="${item.name}">
          </div>
        `;

        cartItems.appendChild(cartItem);
        sum += item.price * item.quantity;
      });

      totalSum.innerText = sum.toFixed(2);
    }

    function addToCart(productName) {
      const product = products.find(p => p.name === productName);
      const cartItem = cart.find(item => item.name === productName);

      if (product.currentStock === 0) {
        alert('Out of stock');
        return;
      }

      if (cartItem) {
        cartItem.quantity++;
      } else {
        cart.push({
          ...product,
          quantity: 1
        });
      }

      product.currentStock--;
      renderCart();
    }

    function increaseQuantity(productName) {
      const product = products.find(p => p.name === productName);
      const cartItem = cart.find(item => item.name === productName);

      if (product.currentStock === 0) {
        alert('Out of stock');
        return;
      }

      cartItem.quantity++;
      product.currentStock--;
      renderCart();
    }

    function decreaseQuantity(productName) {
      const product = products.find(p => p.name === productName);
      const cartItem = cart.find(item => item.name === productName);

      if (cartItem.quantity > 1) {
        cartItem.quantity--;
        product.currentStock++;
      } else {
        cart.splice(cart.indexOf(cartItem), 1);
        product.currentStock++;
      }

      renderCart();
    }

    renderProducts();
  </script>
</body>
</html>
